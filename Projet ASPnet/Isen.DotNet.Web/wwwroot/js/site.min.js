var app=angular.module("myApp",[]);app.service("Map",function(n){this.init=function(){var n={center:new google.maps.LatLng(40.7127837,-74.005941300000018),zoom:13,disableDefaultUI:!0};this.map=new google.maps.Map(document.getElementById("map"),n);this.places=new google.maps.places.PlacesService(this.map)};this.search=function(t){var i=n.defer();return this.places.textSearch({query:t},function(n,t){t=="OK"?i.resolve(n[0]):i.reject(t)}),i.promise};this.addMarker=function(n){this.marker&&this.marker.setMap(null);this.marker=new google.maps.Marker({map:this.map,position:n.geometry.location,animation:google.maps.Animation.DROP});this.map.setCenter(n.geometry.location)}});app.controller("newPlaceCtrl",function(n,t){n.place={};n.search=function(){n.apiError=!1;t.search(n.searchPlace).then(function(i){t.addMarker(i);n.place.name=i.name;n.place.lat=i.geometry.location.lat();n.place.lng=i.geometry.location.lng()},function(t){n.apiError=!0;n.apiStatus=t})};n.send=function(){alert(n.place.name+" : "+n.place.lat+", "+n.place.lng)};t.init()});